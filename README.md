# Yield Protocol Strategy-v2 Exploit
- The [vulnerability](https://medium.com/yield-protocol/strategy-v2-burn-bug-post-mortem-51003ebcae5a) is a miscalculation in the ``burn()`` function via a ``donation`` attack. For a deep explanation on the vulnerability above, click on the link above. Otherwise, there's a simple explanation in the POC and below.
- In particular, ``burn()`` is using the *pool balance* of the strategy contract instead of the *cached balance*. 
    - If we *send* funds to the protocol prior to burning, the following amount of tokens sent back to use is inflated. 
    - When we call ``mint()``, we get to use the "donated" tokens still. Yikes! No cost to inflation.
    - These inflated token gathered on the ``burn()`` over and over again to steal all of the funds over. 
- Contract for Liquidity Providing strategies from Yield Protocol. Forked from https://github.com/yieldprotocol/strategy-v2. 

### Run the exploit

Compile and test the smart contract with [Foundry](https://getfoundry.sh/):

```
$ forge install
$ forge test --match testVulnRepeated -vv  #Runs the exploit
```
